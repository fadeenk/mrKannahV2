(this["webpackJsonpreact-web-gifted-chat-demo"]=this["webpackJsonpreact-web-gifted-chat-demo"]||[]).push([[0],{165:function(e,t,a){e.exports=a(228)},228:function(e,t,a){"use strict";a.r(t);var n=a(25),r=a(0),c=a.n(r),i=a(11),o=a.n(i),l=a(285),u=a(282),s=a(280),m=a(67),d=a(277),h=a(132),p=a(272),f=a(273),b=a(238),g=a(135),E=a.n(g),v=a(136),w=a.n(v),S=a(274),O=a(275),C=a(276),y=a(287),x=a(45),I=Object(h.a)((function(e){return{root:{flexGrow:1},list:{width:250},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function j(){var e=I(),t=Object(x.g)(),a=c.a.useState(!1),r=Object(n.a)(a,2),i=r[0],o=r[1],l=c.a.useState(null),u=Object(n.a)(l,2),s=u[0],d=u[1],h=Boolean(s),g=function(e){d(e.currentTarget)},v=function(){d(null)};function j(e){o("/about"===e),t.push(e),v()}return c.a.createElement("div",{className:e.root},c.a.createElement(p.a,{position:"static"},c.a.createElement(f.a,null,c.a.createElement(b.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:g},c.a.createElement(E.a,null)),c.a.createElement(m.a,{variant:"h6",className:e.title},"Title"),c.a.createElement(y.a,{id:"menu-appbar",open:h,onClose:v},c.a.createElement(S.a,{className:e.list},c.a.createElement(O.a,{button:!0,onClick:function(){return j("/")}},c.a.createElement(C.a,null,"Home")),c.a.createElement(O.a,{button:!0,onClick:function(){return j("/about")}},c.a.createElement(C.a,null,"About")),c.a.createElement(O.a,{button:!0,onClick:function(){return j("/contacts")}},c.a.createElement(C.a,null,"Contacts")),c.a.createElement(O.a,{button:!0,onClick:function(){return j("/signIn")}},c.a.createElement(C.a,null,"Sign In")))),i&&c.a.createElement("div",null,c.a.createElement(b.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:g,color:"inherit"},c.a.createElement(w.a,null))))))}var k,N=a(55),P=a(81),A=a(137),U=a(148),R=a(138),W=a(149),L=a(119),D=c.a.createContext(null),F=D,V=a(7),T=a.n(V),G=(a(117),a(175),a(230),{apiKey:"AIzaSyAW13v7Owgxl7bmjFede3fW8z4yRhUA5i8",authDomain:"messenger-6915d.firebaseapp.com",databaseURL:"https://messenger-6915d.firebaseio.com",projectId:"messenger-6915d",storageBucket:"messenger-6915d.appspot.com",messagingSenderId:"775400894613",appId:"1:775400894613:web:c7a2ec7fb7a795b6bd2b9c",measurementId:"G-7D8FVV5M3E"}),J=function e(){var t=this;Object(P.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignInWithGoogle=function(){return t.auth.signInWithPopup(t.googleProvider)},this.doSignInWithFacebook=function(){return t.auth.signInWithPopup(t.facebookProvider)},this.doSignInWithTwitter=function(){return t.auth.signInWithPopup(t.twitterProvider)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doSendEmailVerification=function(){return t.auth.currentUser.sendEmailVerification({url:Object({NODE_ENV:"production",PUBLIC_URL:"/messenger"}).REACT_APP_CONFIRMATION_EMAIL_REDIRECT})},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.onAuthUserListener=function(e){t.isListening=!0,t.auth.onAuthStateChanged((function(t){t&&(t={uid:t.uid,email:t.email,emailVerified:t.emailVerified,providerData:t.providerData}),e(t)}))},this.getCurrentUser=function(){return t.auth.currentUser},this.getStorageRef=function(){return t.storage.ref().child(t.auth.currentUser.uid)},T.a.initializeApp(G),this.serverValue=T.a.firestore.ServerValue,this.emailAuthProvider=T.a.auth.EmailAuthProvider,this.isListening=!1,this.auth=T.a.auth(),this.db=T.a.firestore(),this.storage=T.a.storage(),this.googleProvider=new T.a.auth.GoogleAuthProvider,this.facebookProvider=new T.a.auth.FacebookAuthProvider,this.twitterProvider=new T.a.auth.TwitterAuthProvider},_=a(139),B=a.n(_),q=function(e){function t(e){var a;return Object(P.a)(this,t),(a=Object(U.a)(this,Object(R.a)(t).call(this))).state={loggedIn:!1},a}return Object(W.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.firebase.auth.onAuthStateChanged((function(t){t&&e.setState({loggedIn:!0})}))}},{key:"render",value:function(){var e=this,t=this.state.loggedIn,a=this.props.firebase,n={signInSuccessUrl:"./",signInFlow:"popup",signInOptions:[a.googleProvider.providerId,{provider:"yahoo.com",scopes:["sdpp-w"]}]};return t?c.a.createElement("div",null,c.a.createElement(m.a,null,"You are already logged In."),c.a.createElement(L.a,{onClick:function(){a.doSignOut(),e.setState({loggedIn:!1})}},"Sign out")):c.a.createElement(B.a,{uiConfig:n,firebaseAuth:a.auth})}}]),t}(r.Component),M=(k=q,function(e){return c.a.createElement(D.Consumer,null,(function(t){return c.a.createElement(k,Object.assign({},e,{firebase:t}))}))}),z=a(15),H=a.n(z),K=a(102),Y=a(59),Q=a(279),X=a(278),Z=a(288),$=a(289),ee=a(281),te=a(142),ae=a.n(te),ne=a(143),re=a.n(ne),ce=a(141),ie=a.n(ce),oe=Object(h.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,minHeight:500}}}));function le(){var e=oe(),t=Object(x.g)(),a=c.a.useState([]),i=Object(n.a)(a,2),o=i[0],l=i[1],u=c.a.useState([]),m=Object(n.a)(u,2),h=m[0],p=m[1],f=Object(r.useContext)(F),b=f.db,g=f.getCurrentUser();g||t.push("/signIn");var E=g?g.uid:null,v=function(){b.collection("contacts").where("ownerID","==",E).get().then((function(e){h=[],e.forEach((function(e){h.push(Object(Y.a)({id:e.id},e.data()))})),p(h)}))};!h.length&&E&&v();var w=function(e){return function(){var t=o.findIndex((function(t){return t.id===e.id}));-1===t?o.push(e):o.splice(t,1),e.checked=!e.checked,l(Object(K.a)(o))}};return c.a.createElement("div",null,o.length>0&&c.a.createElement(d.a,{onClick:function(){p(h.map((function(e){return e.checked=!0,e}))),l(Object(K.a)(h))}},"Select all"),c.a.createElement(S.a,{className:e.root},h.length>0&&h.map((function(e){var a,n,r="checkbox-list-secondary-label-".concat(e.id);return c.a.createElement(O.a,{key:e.id,button:!0,onClick:function(){return function(e){var a=Object.assign(e);delete a.checked,sessionStorage.setItem("contact",JSON.stringify(a)),t.push("/contacts/new?data=updateContact")}(e)}},c.a.createElement(X.a,null,c.a.createElement($.a,null,(a=e.firstName,(n=e.lastName).length?a[0]+n[0]:a.substr(0,2)))),c.a.createElement(C.a,{id:r,primary:"".concat(e.firstName," ").concat(e.lastName)}),c.a.createElement(Q.a,null,c.a.createElement(Z.a,{edge:"end",onChange:w(e),checked:e.checked,inputProps:{"aria-labelledby":r}})))}))),c.a.createElement(s.a,{maxWidth:"md"},c.a.createElement(ee.a,{disabled:!o.length,className:e.fab,onClick:function(){return sessionStorage.setItem("newCampaign",JSON.stringify(o)),void t.push("/campaigns/new")}},c.a.createElement(ie.a,null)),c.a.createElement(ee.a,{disabled:!E,className:e.fab,onClick:function(){return t.push("/contacts/new")}},c.a.createElement(ae.a,null)),c.a.createElement(ee.a,{disabled:!o.length,className:e.fab,onClick:function(){return function(){var e;return H.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.map((function(e){return H.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H.a.awrap(b.collection("contacts").doc(e.id).delete());case 2:w(e);case 3:case"end":return t.stop()}}))})),t.next=3,H.a.awrap(Promise.all(e));case 3:v();case 4:case"end":return t.stop()}}))}()}},c.a.createElement(re.a,null))))}var ue=a(19),se=a(283),me=a(61),de=a(146),he=a.n(de);function pe(e,t,a){var n,r,c;return H.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.id,r=Object(Y.a)({ownerID:a},e),c=n?t.collection("contacts").doc(n):t.collection("contacts").doc(),i.next=5,H.a.awrap(c.set(r));case 5:case"end":return i.stop()}}))}function fe(){var e=Object(r.useContext)(F),t=Object(x.g)(),a=new URLSearchParams(Object(x.h)().search).get("data"),n={firstName:"",lastName:"",phoneNumber:""};return"updateContact"===a&&(n=JSON.parse(sessionStorage.getItem("contact"))),c.a.createElement(ue.c,{initialValues:n,validate:function(e){var t={};return e.firstName||(t.firstName="Required"),e.phoneNumber||(t.phoneNumber="Required"),t},onSubmit:function(a,n){var r;return H.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return r=n.setSubmitting,c.next=3,H.a.awrap(pe(a,e.db,e.getCurrentUser().uid));case 3:t.push("/contacts"),r(!1);case 5:case"end":return c.stop()}}))},render:function(e){var t=e.submitForm,a=e.isSubmitting,r=(e.values,e.setFieldValue);return c.a.createElement(ue.b,null,c.a.createElement(s.a,{maxWidth:"md"},c.a.createElement(ue.a,{name:"firstName",type:"text",label:"First Name",component:me.a}),c.a.createElement("br",null),c.a.createElement(ue.a,{name:"lastName",type:"text",label:"Last Name",component:me.a}),c.a.createElement("br",null),c.a.createElement(ue.a,{name:"phoneNumber",type:"text",label:"Phone",value:n.phoneNumber,component:he.a,defaultCountry:"us",onlyCountries:["us"],disableAreaCodes:!0,onChange:function(e){r("phoneNumber",e.replace(/\(|\)|-|\s/g,""))}}),c.a.createElement("br",null),a&&c.a.createElement(se.a,null),c.a.createElement("br",null),c.a.createElement(L.a,{variant:"contained",color:"primary",disabled:a,onClick:t},"Submit")))}})}function be(e){var t=Object(r.useState)(!0),a=Object(n.a)(t,2),i=a[0],o=a[1],l=Object(r.useState)(),u=Object(n.a)(l,2),s=u[0],m=u[1];if(e.file){var d=new FileReader;return d.onloadend=function(){o(!1),m(d.result)},d.readAsDataURL(e.file),i?c.a.createElement("p",null,"loading..."):c.a.createElement("img",{src:s,alt:e.file.name,style:{maxWidth:200,maxHeight:200}})}}a(211);var ge="campaigns";function Ee(e,t,a){var n,r,c;return H.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.id,r=Object(Y.a)({ownerID:a},e),c=n?t.collection(ge).doc(n):t.collection(ge).doc(),i.next=5,H.a.awrap(c.set(r));case 5:return i.abrupt("return",c.id);case 6:case"end":return i.stop()}}))}function ve(){var e=Object(r.useContext)(F),t=Object(x.g)(),a=Object(r.useState)([]),i=Object(n.a)(a,2),o=i[0],l=i[1],u=new URLSearchParams(Object(x.h)().search).get("data"),d={title:"",text:"",contacts:[],state:"draft",images:[]};function h(t){var a,n,r,c;return H.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.getStorageRef(),n=a.child(t.name),r={contentType:t.type},i.next=5,H.a.awrap(n.put(t,r));case 5:return c=i.sent,i.next=8,H.a.awrap(c.ref.getDownloadURL());case 8:return i.abrupt("return",i.sent);case 9:case"end":return i.stop()}}))}return"updateCampaign"===u?d=JSON.parse(sessionStorage.getItem("campaign")):d.contacts=JSON.parse(sessionStorage.getItem("newCampaign"))||[],c.a.createElement(ue.c,{initialValues:d,validate:function(e){var t={};return e.title||(t.title="Required"),t},onSubmit:function(a,n){var r,c;return H.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return r=n.setSubmitting,i.next=3,H.a.awrap(Promise.all(Array.from(o).map(h)));case 3:return a.images=i.sent,console.log(a),i.next=7,H.a.awrap(Ee(a,e.db,e.getCurrentUser().uid));case 7:c=i.sent,alert("Saved successfully!\nYour campaign confirmation: "+c),setTimeout((function(){return t.push("/contacts")}),5e3),r(!1);case 11:case"end":return i.stop()}}))},render:function(e){var t=e.submitForm,a=e.isSubmitting;e.values,e.setFieldValue;return c.a.createElement(ue.b,null,c.a.createElement(s.a,{maxWidth:"md"},c.a.createElement(ue.a,{name:"title",type:"text",label:"Title",component:me.a}),c.a.createElement("br",null),c.a.createElement(ue.a,{name:"text",type:"text",label:"Text",component:me.a}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(m.a,{variant:"body2"},"Sending to ".concat(d.contacts.length," contact").concat(d.contacts.length>1?"s":"")),c.a.createElement("br",null),c.a.createElement(m.a,{variant:"body1"},"Upload Images"),c.a.createElement("input",{"aria-label":"upload images",multiple:!0,name:"uploader",type:"file",accept:"image/*",onChange:function(e){l(e.currentTarget.files)}}),c.a.createElement("br",null),Array.from(o).map((function(e){return c.a.createElement(be,{key:e.name,file:e})})),c.a.createElement("br",null),a&&c.a.createElement(se.a,null),c.a.createElement("br",null),c.a.createElement(L.a,{variant:"contained",color:"primary",disabled:a,onClick:t},"Submit")))}})}function we(){return c.a.createElement(m.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",c.a.createElement(d.a,{color:"inherit",href:"https://mrKannah.com/"},"Kannah Services")," ",(new Date).getFullYear(),".")}var Se=a(87),Oe=a(147),Ce=Object(Oe.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:Se.a.A400},background:{default:"#fff"}}}),ye=a(284);o.a.render(c.a.createElement(u.a,{theme:Ce},c.a.createElement(l.a,null),c.a.createElement(F.Provider,{value:new J},c.a.createElement((function(e){var t=c.a.useState(!1),a=Object(n.a)(t,2),i=a[0],o=a[1],l=Object(r.useContext)(F);return l.isListening||l.onAuthUserListener((function(){return o(!0)})),i?e.component:c.a.createElement(s.a,{disableGutters:!0,maxWidth:"md"},c.a.createElement(ye.a,null))}),{component:c.a.createElement((function(){return c.a.createElement(s.a,{disableGutters:!0,maxWidth:"md"},c.a.createElement(N.a,{basename:"/messenger"},c.a.createElement(j,null),c.a.createElement(x.d,null,c.a.createElement(x.b,{path:"/campaigns/new"},c.a.createElement(ve,null)),c.a.createElement(x.b,{path:"/contacts/new"},c.a.createElement(fe,null)),c.a.createElement(x.b,{path:"/contacts"},c.a.createElement(le,null)),c.a.createElement(x.b,{path:"/signIn"},c.a.createElement(M,null)),c.a.createElement(x.b,{path:"*"},c.a.createElement(x.a,{to:"/contacts"})))),c.a.createElement(we,null))}),null)})),","),document.querySelector("#root"))}},[[165,1,2]]]);
//# sourceMappingURL=main.12d27d3a.chunk.js.map
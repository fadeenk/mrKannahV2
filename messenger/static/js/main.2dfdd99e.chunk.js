(this["webpackJsonpreact-web-gifted-chat-demo"]=this["webpackJsonpreact-web-gifted-chat-demo"]||[]).push([[0],{162:function(e,t,a){e.exports=a(224)},224:function(e,t,a){"use strict";a.r(t);var n=a(24),r=a(0),c=a.n(r),i=a(11),o=a.n(i),l=a(281),s=a(275),u=a(273),m=a(68),d=a(276),h=a(132),p=a(268),f=a(269),b=a(234),g=a(135),E=a.n(g),v=a(136),w=a.n(v),S=a(270),O=a(271),x=a(272),y=a(284),C=a(46),N=c.a.createContext(null),I=N,j=a(131),k=a(7),P=a.n(k),A=(a(114),a(168),a(227),{apiKey:"AIzaSyAW13v7Owgxl7bmjFede3fW8z4yRhUA5i8",authDomain:"messenger-6915d.firebaseapp.com",databaseURL:"https://messenger-6915d.firebaseio.com",projectId:"messenger-6915d",storageBucket:"messenger-6915d.appspot.com",messagingSenderId:"775400894613",appId:"1:775400894613:web:c7a2ec7fb7a795b6bd2b9c",measurementId:"G-7D8FVV5M3E"}),U=function e(){var t=this;Object(j.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignInWithGoogle=function(){return t.auth.signInWithPopup(t.googleProvider)},this.doSignInWithFacebook=function(){return t.auth.signInWithPopup(t.facebookProvider)},this.doSignInWithTwitter=function(){return t.auth.signInWithPopup(t.twitterProvider)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doSendEmailVerification=function(){return t.auth.currentUser.sendEmailVerification({url:Object({NODE_ENV:"production",PUBLIC_URL:"/messenger"}).REACT_APP_CONFIRMATION_EMAIL_REDIRECT})},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.onAuthUserListener=function(e){t.isListening=!0,t.auth.onAuthStateChanged((function(t){t&&(t={uid:t.uid,email:t.email,emailVerified:t.emailVerified,providerData:t.providerData}),e(t)}))},this.getCurrentUser=function(){return t.auth.currentUser},this.getStorageRef=function(){return t.storage.ref().child(t.auth.currentUser.uid)},P.a.initializeApp(A),this.serverValue=P.a.firestore.ServerValue,this.emailAuthProvider=P.a.auth.EmailAuthProvider,this.isListening=!1,this.auth=P.a.auth(),this.db=P.a.firestore(),this.storage=P.a.storage(),this.googleProvider=new P.a.auth.GoogleAuthProvider,this.facebookProvider=new P.a.auth.FacebookAuthProvider,this.twitterProvider=new P.a.auth.TwitterAuthProvider},R=Object(h.a)((function(e){return{root:{flexGrow:1},list:{width:250},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function W(){var e=R(),t=Object(C.g)(),a=Object(r.useContext)(I).getCurrentUser(),i=c.a.useState(null),o=Object(n.a)(i,2),l=o[0],s=o[1],u=Boolean(l),d=function(){s(null)};function h(e){t.push(e),d()}return c.a.createElement("div",{className:e.root},c.a.createElement(p.a,{position:"static"},c.a.createElement(f.a,null,c.a.createElement(b.a,{edge:"start",className:e.menuButton,color:"inherit","aria-label":"menu",onClick:function(e){s(e.currentTarget)}},c.a.createElement(E.a,null)),c.a.createElement(m.a,{variant:"h6",className:e.title},"Title"),c.a.createElement(y.a,{id:"menu-appbar",open:u,onClose:d},c.a.createElement(S.a,{className:e.list},c.a.createElement(O.a,{button:!0,onClick:function(){return h("/contacts")}},c.a.createElement(x.a,null,"Contacts")),c.a.createElement(O.a,{button:!0,onClick:function(){return h("/signIn")}},c.a.createElement(x.a,null,a?"Sign Out":"Sign In")))),a&&c.a.createElement("div",null,c.a.createElement(b.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit"},c.a.createElement(w.a,null))))))}var L=a(43),D=a(15),F=a.n(D),V=a(59),T=a(19),J=a(274),G=a(127),_=a(61);function B(e){var t=Object(r.useState)(!0),a=Object(n.a)(t,2),i=a[0],o=a[1],l=Object(r.useState)(),s=Object(n.a)(l,2),u=s[0],m=s[1];if(e.file){var d=new FileReader;return d.onloadend=function(){o(!1),m(d.result)},d.readAsDataURL(e.file),i?c.a.createElement("p",null,"loading..."):c.a.createElement("img",{src:u,alt:e.file.name,style:{maxWidth:200,maxHeight:200}})}}var q=a(139),z=a.n(q),K="campaigns";function M(e,t,a){var n,r,c;return F.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.id,r=Object(V.a)({ownerID:a},e),c=n?t.collection(K).doc(n):t.collection(K).doc(),i.next=5,F.a.awrap(c.set(r));case 5:return i.abrupt("return",c.id);case 6:case"end":return i.stop()}}))}function H(){var e=Object(r.useContext)(I),t=Object(C.g)(),a=Object(r.useState)([]),i=Object(n.a)(a,2),o=i[0],l=i[1],s=new URLSearchParams(Object(C.h)().search).get("data"),d={title:"",text:"",contacts:[],state:"draft",images:[]};function h(t){var a,n,r,c;return F.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return a=e.getStorageRef(),n=a.child(t.name),r={contentType:t.type},i.next=5,F.a.awrap(n.put(t,r));case 5:return c=i.sent,i.next=8,F.a.awrap(c.ref.getDownloadURL());case 8:return i.abrupt("return",i.sent);case 9:case"end":return i.stop()}}))}return"updateCampaign"===s?d=JSON.parse(sessionStorage.getItem("campaign")):d.contacts=JSON.parse(sessionStorage.getItem("newCampaign"))||[],c.a.createElement(T.c,{initialValues:d,validate:function(e){var t={};return e.title||(t.title="Required"),t},onSubmit:function(a,n){var r,c,i;return F.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return r=n.setSubmitting,l.next=3,F.a.awrap(Promise.all(Array.from(o).map(h)));case 3:return a.images=l.sent,console.log(a),l.next=7,F.a.awrap(M(a,e.db,e.getCurrentUser().uid));case 7:return c=l.sent,i=!1,l.prev=9,l.next=12,F.a.awrap(z.a.post("https://rackley-beagle-8612.twil.io/newcampaign",{campaignID:c}));case 12:l.next=17;break;case 14:l.prev=14,l.t0=l.catch(9),i=l.t0;case 17:i?(alert("failed"),console.error(i)):alert("Saved successfully!"),setTimeout((function(){return t.push("/contacts")}),5e3),r(!1);case 20:case"end":return l.stop()}}),null,null,[[9,14]])},render:function(e){var t=e.submitForm,a=e.isSubmitting;e.values,e.setFieldValue;return c.a.createElement(T.b,null,c.a.createElement(u.a,{maxWidth:"md"},c.a.createElement(T.a,{name:"title",type:"text",label:"Title",component:_.a}),c.a.createElement("br",null),c.a.createElement(T.a,{name:"text",type:"text",label:"Text",component:_.a}),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(m.a,{variant:"body2"},"Sending to ".concat(d.contacts.length," contact").concat(d.contacts.length>1?"s":"")),c.a.createElement("br",null),c.a.createElement(m.a,{variant:"body1"},"Upload Images"),c.a.createElement("input",{"aria-label":"upload images",multiple:!0,name:"uploader",type:"file",accept:"image/*",onChange:function(e){l(e.currentTarget.files)}}),c.a.createElement("br",null),Array.from(o).map((function(e){return c.a.createElement(B,{key:e.name,file:e})})),c.a.createElement("br",null),a&&c.a.createElement(J.a,null),c.a.createElement("br",null),c.a.createElement(G.a,{variant:"contained",color:"primary",disabled:a,onClick:t},"Submit")))}})}var Y=a(140),Q=a.n(Y);function X(e,t,a){var n,r,c;return F.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.id,r=Object(V.a)({ownerID:a},e),c=n?t.collection("contacts").doc(n):t.collection("contacts").doc(),i.next=5,F.a.awrap(c.set(r));case 5:case"end":return i.stop()}}))}function Z(){var e=Object(r.useContext)(I),t=Object(C.g)(),a=new URLSearchParams(Object(C.h)().search).get("data"),n={firstName:"",lastName:"",phoneNumber:""};"updateContact"===a&&(n=JSON.parse(sessionStorage.getItem("contact")));var i=JSON.parse(sessionStorage.getItem("contacts"));return c.a.createElement(T.c,{initialValues:n,validate:function(e){var t={};return e.firstName||(t.firstName="Required"),e.phoneNumber||(t.phoneNumber="Required"),t},onSubmit:function(a,n){var r,c;return F.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(r=n.setSubmitting,!(c=i.find((function(e){return e.phoneNumber===a.phoneNumber})))){o.next=6;break}alert("Number already exists for ".concat(c.firstName," ").concat(c.lastName)),o.next=10;break;case 6:return o.next=8,F.a.awrap(X(a,e.db,e.getCurrentUser().uid));case 8:t.push("/contacts"),r(!1);case 10:case"end":return o.stop()}}))},render:function(e){var t=e.submitForm,a=e.isSubmitting,r=(e.values,e.setFieldValue);return c.a.createElement(T.b,null,c.a.createElement(u.a,{maxWidth:"md"},c.a.createElement(T.a,{name:"firstName",type:"text",label:"First Name",component:_.a}),c.a.createElement("br",null),c.a.createElement(T.a,{name:"lastName",type:"text",label:"Last Name",component:_.a}),c.a.createElement("br",null),c.a.createElement(T.a,{name:"phoneNumber",type:"text",label:"Phone",value:n.phoneNumber,component:Q.a,defaultCountry:"us",onlyCountries:["us"],disableAreaCodes:!0,onChange:function(e){r("phoneNumber",e.replace(/\(|\)|-|\s/g,""))}}),c.a.createElement("br",null),a&&c.a.createElement(J.a,null),c.a.createElement("br",null),c.a.createElement(G.a,{variant:"contained",color:"primary",disabled:a,onClick:t},"Submit")))}})}var $=a(101),ee=a(278),te=a(277),ae=a(283),ne=a(285),re=a(279),ce=a(142),ie=a.n(ce),oe=a(143),le=a.n(oe),se=a(141),ue=a.n(se),me=Object(h.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,minHeight:500}}}));function de(e,t){var a=e.firstName+", "+e.lastName,n=t.firstName+", "+t.lastName;return a>n?1:a<n?-1:0}function he(){var e=me(),t=Object(C.g)(),a=c.a.useState([]),i=Object(n.a)(a,2),o=i[0],l=i[1],s=c.a.useState([]),m=Object(n.a)(s,2),h=m[0],p=m[1],f=Object(r.useContext)(I),b=f.db,g=f.getCurrentUser();g||t.push("/signIn");var E=g?g.uid:null,v=function(){b.collection("contacts").where("ownerID","==",E).get().then((function(e){h=[],e.forEach((function(e){h.push(Object(V.a)({id:e.id},e.data()))})),h=h.sort(de),sessionStorage.setItem("contacts",JSON.stringify(h)),p(h)}))};!h.length&&E&&v();var w=function(e){return function(){var t=o.findIndex((function(t){return t.id===e.id}));-1===t?o.push(e):o.splice(t,1),e.checked=!e.checked,l(Object($.a)(o))}};return c.a.createElement("div",null,o.length>0&&c.a.createElement(d.a,{onClick:function(){p(h.map((function(e){return e.checked=!0,e}))),l(Object($.a)(h)),alert("Selected all contacts")}},"Select all"),c.a.createElement(S.a,{className:e.root},h.length>0&&h.map((function(e){var a,n,r="checkbox-list-secondary-label-".concat(e.id);return c.a.createElement(O.a,{key:e.id,button:!0,onClick:function(){return function(e){var a=Object.assign(e);delete a.checked,sessionStorage.setItem("contact",JSON.stringify(a)),t.push("/contacts/new?data=updateContact")}(e)}},c.a.createElement(te.a,null,c.a.createElement(ne.a,null,(a=e.firstName,(n=e.lastName).length?a[0]+n[0]:a.substr(0,2)))),c.a.createElement(x.a,{id:r,primary:"".concat(e.firstName," ").concat(e.lastName)}),c.a.createElement(ee.a,null,c.a.createElement(ae.a,{edge:"end",onChange:w(e),checked:e.checked,inputProps:{"aria-labelledby":r}})))}))),c.a.createElement(u.a,{maxWidth:"md"},c.a.createElement(re.a,{disabled:!o.length,className:e.fab,onClick:function(){return sessionStorage.setItem("newCampaign",JSON.stringify(o)),void t.push("/campaigns/new")}},c.a.createElement(ue.a,null)),c.a.createElement(re.a,{disabled:!E,className:e.fab,onClick:function(){return t.push("/contacts/new")}},c.a.createElement(ie.a,null)),c.a.createElement(re.a,{disabled:!o.length,className:e.fab,onClick:function(){return function(){var e;return F.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.map((function(e){return F.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.a.awrap(b.collection("contacts").doc(e.id).delete());case 2:w(e);case 3:case"end":return t.stop()}}))})),t.next=3,F.a.awrap(Promise.all(e));case 3:v();case 4:case"end":return t.stop()}}))}()}},c.a.createElement(le.a,null))))}var pe=a(144),fe=a.n(pe);function be(){var e=this,t=Object(C.g)(),a=Object(r.useContext)(I),i=c.a.useState(!1),o=Object(n.a)(i,2),l=o[0],s=o[1];a.auth.onAuthStateChanged((function(e){e&&s(!0)}));var d={callbacks:{signInSuccessWithAuthResult:function(e,a){return t.push("/"),!1}},signInSuccessUrl:"/",signInFlow:"popup",signInOptions:[a.googleProvider.providerId,{provider:"yahoo.com",scopes:["sdpp-w"]}]};return l?c.a.createElement(u.a,null,c.a.createElement(m.a,null,"You are already logged In."),c.a.createElement(G.a,{onClick:function(){a.doSignOut(),e.setState({loggedIn:!1})}},"Sign out")):c.a.createElement(fe.a,{uiConfig:d,firebaseAuth:a.auth})}function ge(){var e=Object(C.g)(),t=new URLSearchParams(Object(C.h)().search).get("redirect");if(t){var a=t.replace(/\/\//g,"/");return e.push(a),c.a.createElement("div",null)}return c.a.createElement(C.d,null,c.a.createElement(C.b,{path:"/campaigns/new"},c.a.createElement(H,null)),c.a.createElement(C.b,{path:"/contacts/new"},c.a.createElement(Z,null)),c.a.createElement(C.b,{path:"/contacts"},c.a.createElement(he,null)),c.a.createElement(C.b,{path:"/signIn"},c.a.createElement(be,null)),c.a.createElement(C.b,{path:"*"},c.a.createElement(C.a,{to:"/contacts"})))}function Ee(){return c.a.createElement(m.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",c.a.createElement(d.a,{color:"inherit",href:"https://mrKannah.com/"},"Kannah Services")," ",(new Date).getFullYear(),".")}var ve=a(86),we=a(146),Se=Object(we.a)({palette:{primary:{main:"#556cd6"},secondary:{main:"#19857b"},error:{main:ve.a.A400},background:{default:"#fff"}}}),Oe=a(280);o.a.render(c.a.createElement(s.a,{theme:Se},c.a.createElement(l.a,null),c.a.createElement(I.Provider,{value:new U},c.a.createElement((function(e){var t=c.a.useState(!1),a=Object(n.a)(t,2),i=a[0],o=a[1],l=Object(r.useContext)(I);return l.isListening||l.onAuthUserListener((function(){return o(!0)})),i?e.component:c.a.createElement(u.a,{disableGutters:!0,maxWidth:"md"},c.a.createElement(Oe.a,null))}),{component:c.a.createElement((function(){return c.a.createElement(u.a,{disableGutters:!0,maxWidth:"md"},c.a.createElement(L.a,{basename:"/messenger"},c.a.createElement(W,null),c.a.createElement(ge,null)),c.a.createElement(Ee,null))}),null)})),","),document.querySelector("#root"))}},[[162,1,2]]]);
//# sourceMappingURL=main.2dfdd99e.chunk.js.map